"use strict";(self.webpackChunkecommerce_cart=self.webpackChunkecommerce_cart||[]).push([[781],{781:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(43),r=s(216),l=s(475),c=s(910),o=s(929);const n=new(s(284));var i=s(579);function d(){const e=(0,r.Zp)(),[t,s]=(0,a.useState)(0),[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)("Guest");(0,a.useEffect)((()=>{const e=localStorage.getItem("userEmail");e&&u(e);const t=localStorage.getItem("userName");t&&h(t)}),[]),(0,a.useEffect)((()=>{if(d){const e=async()=>{try{const e=await fetch(`http://localhost:5000/cart/countCart?email=${d}`),t=await e.json();s(t.count)}catch(e){console.error("Error fetching cart count:",e)}};return e(),n.on("cartUpdated",e),()=>{n.off("cartUpdated",e)}}}),[d]);return(0,i.jsx)("nav",{className:"bg-gray-800 text-white p-4",children:(0,i.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)(l.N_,{to:"/home",className:"hover:text-gray-300",children:"Home"}),(0,i.jsx)(l.N_,{to:"/about",className:"hover:text-gray-300",children:"About"}),(0,i.jsxs)(l.N_,{to:"/cart",className:"flex items-center space-x-2 hover:text-gray-300",children:[(0,i.jsx)(c.g,{icon:o._Ro}),(0,i.jsx)("span",{className:"bg-red-500 text-white rounded-full px-2 py-1 text-sm",children:t})]})]}),(0,i.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,i.jsx)("button",{onClick:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userEmail"),console.log("Logout successful"),e("/home")},className:"hover:text-gray-300 focus:outline-none",children:"Logout"}),(0,i.jsxs)("span",{className:"font-medium",children:["Welcome!   ",m]})]})]})})}var u=s(420);const m=e=>{let{addToCart:t}=e;const[s,r]=(0,a.useState)([]),[l,c]=(0,a.useState)(null),[o,d]=(0,a.useState)(null);(0,a.useEffect)((()=>{fetch("https://fakestoreapi.com/products").then((e=>e.json())).then((e=>r(e))).catch((e=>console.error("Error fetching products:",e)));const e=localStorage.getItem("authToken");if(e&&d(e),console.log("Auth token:",e),e)try{const t=(0,u.s)(e);console.log("Decoded Token: ",t),c(t.email),localStorage.setItem("userEmail",t.email)}catch(t){console.error("Error decoding the token:",t)}else console.log("No token found")}),[]);return(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-6",children:s.map((e=>(0,i.jsxs)("div",{className:"border p-4 rounded-lg flex flex-col bg-white shadow-md",children:[(0,i.jsx)("div",{className:"relative overflow-hidden w-full h-96 mb-4 rounded",children:(0,i.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),(0,i.jsx)("h2",{className:"text-xl font-semibold mb-2 text-gray-800 truncate",children:e.title}),(0,i.jsxs)("p",{className:"text-lg text-gray-600 mb-2",children:["$",e.price.toFixed(2)]}),(0,i.jsx)("button",{onClick:()=>(e=>{if(!l)return void alert("Please log in to add items to the cart.");const{id:s,image:a,title:r,price:c}=e;fetch("http://localhost:5000/cart/addCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,productId:s,image:a,title:r,price:c,quantity:1})}).then((e=>e.json())).then((s=>{"Cart updated successfully"===s.message?(alert("Product added to cart successfully!"),n.emit("cartUpdated"),t&&t(e)):alert("Error adding to cart: "+s.message)})).catch((e=>{console.error("Error adding to cart:",e),alert("Error adding to cart")}))})(e),className:"bg-blue-500 text-white p-2 rounded mt-2 hover:bg-blue-600 transition",children:"Add to Cart"})]},e.id)))})};function h(){const[e,t]=(0,a.useState)("");return(0,i.jsxs)("footer",{className:"bg-gray-800 text-white p-6",children:[(0,i.jsxs)("div",{className:"container mx-auto flex flex-wrap justify-between items-start",children:[(0,i.jsx)("div",{className:"flex flex-col space-y-2",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"Contact Us"}),(0,i.jsx)("p",{className:"text-gray-400",children:"1234 Street Name, City, Country"}),(0,i.jsx)("p",{className:"text-gray-400",children:"Email: contact@example.com"}),(0,i.jsx)("p",{className:"text-gray-400",children:"Phone: (123) 456-7890"})]})}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"Newsletter"}),(0,i.jsx)("p",{className:"text-gray-400",children:"Subscribe to our newsletter for the latest updates."}),(0,i.jsxs)("form",{onSubmit:s=>{s.preventDefault(),console.log("Subscribed with email:",e),t("")},className:"flex space-x-2",children:[(0,i.jsx)("input",{type:"email",placeholder:"Your email address",value:e,onChange:e=>t(e.target.value),required:!0,className:"p-2 bg-gray-700 border border-gray-600 rounded-lg text-white"}),(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg",children:"Subscribe"})]})]})]}),(0,i.jsx)("div",{className:"mt-4 border-t border-gray-600 pt-4 text-center text-gray-400",children:(0,i.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Your Company Name. All rights reserved."]})})]})}const x=()=>{const[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(0);(0,a.useEffect)((()=>{!async function(){const e=await fetch("https://fakestoreapi.com/products"),s=await e.json();t(s)}()}),[]);return(0,i.jsxs)("div",{className:"relative w-full h-72 mx-auto mt-8",children:[" ",(0,i.jsxs)("div",{className:"relative overflow-hidden w-full h-full rounded-lg",children:[e.length>0&&(0,i.jsx)("div",{className:"carousel-wrapper flex transition-transform duration-500",style:{transform:`translateX(-${100*s}%)`},children:e.map(((e,t)=>(0,i.jsx)("div",{className:"carousel-item flex-shrink-0 w-full h-full flex items-center justify-center",children:(0,i.jsx)("img",{src:e.image,alt:e.title,className:" h-72 object-cover"})},t)))}),(0,i.jsx)("button",{onClick:()=>{r((t=>(t-1+e.length)%e.length))},className:"absolute top-1/2 left-4 transform -translate-y-1/2 bg-gray-800 text-white p-3 rounded-full z-10",children:"<"}),(0,i.jsx)("button",{onClick:()=>{r((t=>(t+1)%e.length))},className:"absolute top-1/2 right-4 transform -translate-y-1/2 bg-gray-800 text-white p-3 rounded-full z-10",children:">"})]})]})};function g(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(d,{})}),(0,i.jsx)("div",{children:(0,i.jsx)(x,{})}),(0,i.jsx)("div",{children:(0,i.jsx)(m,{})}),(0,i.jsx)("div",{children:(0,i.jsx)(h,{})})]})}}}]);
//# sourceMappingURL=781.8abc41f5.chunk.js.map